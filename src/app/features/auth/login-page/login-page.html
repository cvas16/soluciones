<div class="auth-page-wrapper pt-5">
  <!-- Fondo -->
  <div class="auth-one-bg-position auth-one-bg">
    <div class="bg-overlay"></div>
    <div class="shape"></div>
  </div>

  <!-- Contenido -->
  <div class="auth-page-content">
    <div class="container">
      <!-- Cabecera superior -->
      <div class="row">
        <div class="col-lg-12">
          <div class="text-center mt-sm-5 mb-4 text-white-50">
            <div>
              <a routerLink="/" class="d-inline-block auth-logo">
                <h2 class="text-white">TASKFLOW</h2>
              </a>
            </div>
            <p class="mt-3 fs-15 fw-medium">Tu Gestor de Proyectos y Tareas</p>
          </div>
        </div>
      </div>

      <!-- Card de Login -->
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6 col-xl-5">
          <div class="card mt-4">
            <div class="card-body p-4">
              <div class="text-center mt-2">
                <h5 class="text-primary">Iniciar Sesión</h5>
                <p class="text-muted">Bienvenido de nuevo, inicia sesión con tus credenciales.</p>
              </div>

              <!-- Alerta de error -->
              <div *ngIf="errorMessage" class="alert alert-danger text-center mb-4" role="alert">
                {{ errorMessage }}
              </div>

              <!-- Formulario -->
              <div class="p-2 mt-4">
                <form [formGroup]="loginForm" (ngSubmit)="onLogin()" novalidate>
                  <!-- Usuario -->
                  <div class="mb-3">
                    <label for="username" class="form-label">Usuario <span class="text-danger">*</span></label>
                    <input
                      type="text"
                      id="username"
                      placeholder="Introduce tu usuario"
                      formControlName="username"
                      class="form-control"
                      [ngClass]="{ 'is-invalid': isInvalidField('username') }">
                    <div *ngIf="isInvalidField('username')" class="invalid-feedback">
                      {{ getErrorMessage('username') }}
                    </div>
                  </div>

                  <!-- Contraseña -->
                  <div class="mb-3">
                    <label class="form-label" for="password">Contraseña <span class="text-danger">*</span></label>
                    <div class="position-relative auth-pass-inputgroup">
                      <input
                        type="password"
                        id="password"
                        placeholder="Introduce tu contraseña"
                        formControlName="password"
                        class="form-control pe-5 password-input"
                        [ngClass]="{ 'is-invalid': isInvalidField('password') }">
                      <div *ngIf="isInvalidField('password')" class="invalid-feedback">
                        {{ getErrorMessage('password') }}
                      </div>
                    </div>
                  </div>

                  <!-- Botón -->
                  <div class="mt-4">
                    <button
                      type="submit"
                      [disabled]="loginForm.invalid || isLoading"
                      class="btn btn-success w-100">
                      <span *ngIf="!isLoading">Ingresar</span>
                      <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                      <span *ngIf="isLoading"> Cargando...</span>
                    </button>
                  </div>
                </form>
              </div>
            </div>

            <!-- Enlace de registro -->
            <div class="mt-4 mb-4 text-center">
              <p class="mb-0">¿No tienes cuenta?
                <a routerLink="/auth/register" class="fw-semibold text-decoration-underline"> Regístrate aquí </a>
              </p>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

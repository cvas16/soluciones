<div *ngIf="task" class="task-card" [class.completed]="isCompleted()">

  <div class="d-flex gap-2">

    <div class="checkbox-wrapper" (click)="$event.stopPropagation()">
      <input type="checkbox"
             class="custom-checkbox"
             [checked]="isCompleted()"
             (change)="toggleCompletion()">
    </div>

    <div class="w-100">
      <div class="d-flex flex-wrap gap-1 mb-1" *ngIf="task.tags && task.tags.length > 0">
       <span *ngFor="let tag of task.tags"
             class="badge rounded-pill"
             style="font-size: 0.6rem; font-weight: normal;"
             [style.background-color]="tag.color"
             [style.color]="'#fff'">
         {{ tag.name }}
       </span>
    </div>
      <div class="card-title" [class.text-decoration-line-through]="isCompleted()">
        {{ task.title }}
      </div>

      <div class="card-desc"
           *ngIf="task.description"
           [class.text-decoration-line-through]="isCompleted()">
        {{ task.description }}
      </div>

      <div class="card-footer-info">
        <span class="priority-tag"
              [ngClass]="{
                'tag-alta': task.priority === 'Alta',
                'tag-media': task.priority === 'Media' || !task.priority,
                'tag-baja': task.priority === 'Baja'
              }">
          {{ task.priority || 'MEDIA' }}
        </span>

        <div class="meta-info">
          <span *ngIf="task.attachments?.length" title="Adjuntos">
            ðŸ“Ž {{ task.attachments?.length }}
          </span>

          <div class="user-avatar-xs" [title]="task.assignedUsername || 'Sin asignar'">
            {{ task.assignedUsername ? task.assignedUsername.charAt(0).toUpperCase() : '?' }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
